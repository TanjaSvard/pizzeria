@model PizzeriaMassagotti.Models.Order
@inject PizzeriaMassagotti.Services.CartService _cartService
@inject PizzeriaMassagotti.Services.PaymentService _paymentService


@{
    ViewData["Title"] = "Edit";
}
<h2>Your order</h2>
@*<h4>Order</h4>*@
<hr />
<div class="row">
    <div class="col-md-6">
        <form asp-action="Edit">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="OrderId" />
            <input type="hidden" asp-for="ShoppingCartId" />
            <input type="hidden" asp-for="Anonymous" />
            <input type="hidden" asp-for="ApplicationUserId" />
            <input type="hidden" asp-for="OrderDateTime" />
         

            <div class="form-group">
                @foreach (var item in Model.CartItems)
            {
                    <p>@item.Dish.Name, @item.Price kr</p>
                    @foreach (var ingredient in item.CartItemIngredients)
                {
                        @*<p>@String.Join(ingredient.Ingredient.Name)</p>*@
                        <p>@ingredient.Ingredient.Name</p>
                    }
                }
                <h6>Totalt pris: @_cartService.TotalAmount(Model.ShoppingCartId)</h6>
            </div>

                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input asp-for="Name" /> @Html.DisplayNameFor(model => model.Name)
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input asp-for="Address" /> @Html.DisplayNameFor(model => model.Address)
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input asp-for="ZipCode" /> @Html.DisplayNameFor(model => model.ZipCode)
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input asp-for="City" /> @Html.DisplayNameFor(model => model.City)
                        </label>
                    </div>
                </div>
            
            <div class="form-group">
                <div class="checkbox">
                    <label>
                        <input asp-for="CardNumber" /> @Html.DisplayNameFor(model => model.CardNumber)
                    </label>
                </div>
            </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input asp-for="CVC" /> @Html.DisplayNameFor(model => model.CVC)
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <div class="checkbox">
                        <label>
                            <input asp-for="ExpireDate.Date" value ="YY/MM" type ="date"/> @Html.DisplayNameFor(model => model.ExpireDate.Date)
                        </label>
                    </div>
                </div>          
<div class="form-group">
    <input type="submit" value="Pay" class="btn btn-default" />
</div>
        </form>
    </div>
</div>

<div>
    @*<a asp-action="Index">Back to List</a>*@
</div>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
